{% extends "base.html" %}

{% block title %}View Projects - CS631 Company Database{% endblock %}

{% block content %}
<h2>All Projects (READ)</h2>

{% if projects %}
<p>Total Projects: {{ projects|length }}</p>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>Project #</th>
            <th>Project Name</th>
            <th>Budget</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Manager</th>
            <th>Department</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for proj in projects %}
        <tr>
            <td>{{ proj[0] }}</td>
            <td>{{ proj[1] }}</td>
            <td>${{ "{:,.2f}".format(proj[2]) if proj[2] else 'N/A' }}</td>
            <td>{{ proj[3] }}</td>
            <td>{{ proj[4] if proj[4] else 'Active' }}</td>
            <td>{{ proj[5] }}</td>
            <td>{{ proj[6] }}</td>
            <td>{{ 'Completed' if proj[4] else 'Active' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No projects found in the database.</p>
{% endif %}

<p>
    <a href="/projects/create"><button>Create New Project</button></a>
    <a href="/projects"><button>Back to Project Dashboard</button></a>
</p>
{% endblock %}
